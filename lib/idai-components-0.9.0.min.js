"use strict";angular.module("idai.templates",["partials/directives/idai-footer.html","partials/directives/idai-navbar.html"]),angular.module("partials/directives/idai-footer.html",[]).run(["$templateCache",function(a){a.put("partials/directives/idai-footer.html",'<div ng-hide="$root.hideFooter" class="row idai-footer">\n	<div class="col-md-12 text-center">\n		<p>\n			<a href="http://www.dainst.org/" target="_blank"><img src="img/logo_dai.png" height="60px" style="margin-right: 20px;"></a>\n			<a href="http://archaeologie.uni-koeln.de" target="_blank"><img src="img/logo_unikoeln.png" height="50px" style="margin-right: 20px;"></a>\n			<a href="http://archaeologie.uni-koeln.de/node/23" target="_blank"><img src="img/logo_codarchlab.png" height="25px"></a>\n		</p>\n		<p>\n			Copyright Arachne Â© {{date | date:\'yyyy\'}} | \n			<span ng-repeat="link in dynamicLinkList">\n				<a href="info/{{link.id}}">{{link.title}}</a> |\n			</span>\n			{{\'footer_bugs_to\'|transl8}}\n			<a href="mailto:{{mailto}}">{{mailto}}</a></p>\n	</div>\n</div>')}]),angular.module("partials/directives/idai-navbar.html",[]).run(["$templateCache",function(a){a.put("partials/directives/idai-navbar.html",'<nav class="navbar navbar-default navbar-fixed-top" role="navigation">\n    <div style="padding-left:0px; position:relative">\n        <div class="pull-left">\n            <ul class="nav navbar-nav">\n                <li class="dropdown" dropdown>\n                    <a href="#" dropdown-toggle class="dropdown-toggle" data-toggle="dropdown">\n                        <img src="img/kleinergreif.png"\n                            style="height: 36px; width: 36px; margin-top: -8px; margin-bottom: -8px">\n                        <b class="caret"></b>\n                    </a>\n                    <ul class="dropdown-menu" dropdown-menu>\n                        <li><a href="http://www.dainst.org/de/forschung/forschung-digital/idai.welt" target="_blank">iDAI.welt</a></li>\n                        <li class="divider"></li>\n                        <li><a href="https://gazetteer.dainst.org/" target="_blank">iDAI.gazetteer</a></li>\n                        <li><a href="http://geoserver.dainst.org/" target="_blank">iDAI.geoserver</a></li>\n                        <li><a href="http://arachne.uni-koeln.de/" target="_blank">iDAI.objects&nbsp;/&nbsp;Arachne</a></li>\n                        <li><a href="http://geoserver.dainst.org/" target="_blank">iDAI.bibliography&nbsp;/&nbsp;Zenon</a></li>\n                        <li><a href="http://archwort.dainst.org/thesaurus/de/vocab" target="_blank">iDAI.vocab</a></li>\n                        <li><a href="http://hellespont.dainst.org" target="_blank">Hellespont</a></li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n        <a href="/">\n            <img class="pull-left" src="img/logo_arachne.png" style="height: 36px; margin-top: 8px;"></img>\n        </a>\n    </div>\n\n    <div class="navbar-header" ng-init="isCollapsed = true">\n\n        <button class="navbar-toggle" ng-click="isCollapsed = !isCollapsed" type="button">\n            <span class="sr-only">Toggle navigation</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n        </button>\n\n    </div>\n    <div class="collapse navbar-collapse" collapse="isCollapsed" style="padding-left:10px">\n\n        <form\n              ng-submit="search()"\n              ng-hide="currentPath == \'/\'"\n              class="navbar-left navbar-form input-group form-inline"\n              role="search">\n            <input autofocus type="text" class="form-control" placeholder="neue Suche" ng-model="q" name="q">\n		        <span class="navbar-left input-group-btn">\n		        	<button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>\n		        </span>\n        </form>\n\n        <ul class="nav navbar-nav navbar-right">\n\n            <li ng-repeat="link in dynamicLinkList">\n                <a href="info/{{link.id}}">{{link.title}}</a>\n            </li>\n\n            <li>\n\n                <!-- user menu if logged in -->\n                <div ng-if="userObject.username" ng-cloak dropdown keyboard-nav>\n\n                    <a href="bookmarks" class="btn btn-default btn-sm navbar-btn" dropdown-toggle class="dropdown-toggle" data-toggle="dropdown">\n                        <span class="glyphicon glyphicon-user"></span>\n                        &nbsp;{{userObject.username}}\n                        <span class="caret"></span>\n                    </a>\n                    <ul dropdown-menu class="dropdown-menu" role="menu"\n                            style="margin-top:-11px; margin-right: 4px;">\n                        <div ng-include="\'partials/navbar-menu.html\'" include-replace></div>\n                        <li class="divider"></li>\n                        <li>\n                            <a ng-click="logoutFunction();" style="cursor:pointer;">\n                                <span class="glyphicon glyphicon-log-out"></span> &nbsp;{{\'navbar_sign_out\' | transl8}}\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n\n                <!-- login and register if not logged in -->\n                <div ng-if="!userObject.username" ng-cloak\n                     class="btn-group btn-group-sm"\n                     style="margin-top:2px;">\n                    <a type="button" class="btn btn-default navbar-btn" ng-click="loginFunction();">\n                        <b>\n                            <span class="glyphicon glyphicon-log-in"></span>\n                            &nbsp;{{\'navbar_sign_in\' | transl8}}\n                        </b>\n                    </a>\n                    <a ng-if="!userObject.username" class="btn btn-default navbar-btn" href="register">\n                        {{\'navbar_sign_up\' | transl8}}\n                    </a>\n                </div>\n\n            </li>\n\n            <li style="margin-right:30px; margin-left: 5px;">\n                <div>\n                    <a type="button" href="contact" class="btn btn-sm btn-default navbar-btn">\n                        <span class="glyphicon glyphicon-envelope"></span>\n                    </a>\n                </div>\n            </li>\n				\n        </ul>\n    </div>\n</nav>\n')}]),angular.module("idai.components",[]),angular.module("idai.components").factory("language",function(){var a=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;return"de"==a.substring(0,2)&&(a="de"),"en"==a.substring(0,2)&&(a="en"),{browserPrimaryLanguage:function(){return a}}}),angular.module("idai.components").factory("languageSelection",["language",function(a){var b="de",c="en";return{__:function(d,e,f){return a.browserPrimaryLanguage()==b?void e(b,f):void(d(a.browserPrimaryLanguage(),f)?e(a.browserPrimaryLanguage(),f):a.browserPrimaryLanguage()==c?e(b,f):d(c,f)?e(c,f):e(b,f))}}}]),angular.module("idai.components").factory("localizedContent",["languageSelection",function(a){return{reduceTitles:function(b){var c=function(a,b){b.title&&(b.title=b.title[a])},d=function(a,b){return b.title?b.title[a]:!1},e=function(b){if(a.__(d,c,b),b.children)for(var f=0;f<b.children.length;f++)e(b.children[f])};e(b)},determineLanguage:function(b,c){var d="",e=function(a,b){var d=function(b){if(b.id==c&&b.title[a])return!0;if(b.children)for(var e=0;e<b.children.length;e++)if(d(b.children[e]))return!0;return!1};return d(b)?!0:!1},f=function(a){d=a};return a.__(e,f,b),d},getNodeById:function(a,b){var c=function(a,b){if(a.id==b)return a;if(!a.children)return void 0;for(var d=void 0,e=0;e<a.children.length;e++){var f=c(a.children[e],b);void 0!=f&&(d=f)}return d};return c(a,b)}}}]),angular.module("idai.components").factory("transl8",["$http","language",function(a,b){var c="en",d="TRL8 MISSING",e="http://crazyhorse.archaeologie.uni-koeln.de/transl8/translation/jsonp?application=arachne4_frontend&lang={LANG}&callback=JSON_CALLBACK",f=c;"de"==b.browserPrimaryLanguage()&&(f="de");var g=e.replace("{LANG}",f),h={};return a.jsonp(g).success(function(a){for(var b=0;b<a.length;b++)h[a[b].key]=a[b].value}).error(function(){alert("ERROR: Could not get translations. Try to reload the page or send a mail to arachne@uni-koeln.de")}),{getTranslation:function(a){var b=h[a];return b&&0!==b.length||(b=d+" ("+a+")"),b}}}]),angular.module("idai.components").filter("transl8",["transl8",function(a){var b=function(b){var c=a.getTranslation(b);return c};return b.$stateful=!0,b}]),angular.module("idai.components").directive("idaiFooter",function(){return{restrict:"E",scope:{mailto:"@"},templateUrl:"partials/directives/idai-footer.html",controller:["$scope","$http","localizedContent",function(a,b,c){a.date=new Date,a.getFooterLinks=function(d){b.get("info/content.json").success(function(b){var d=c.getNodeById(b,"footer");void 0==d&&console.log("error: no footerLinks found"),c.reduceTitles(d),a.dynamicLinkList=d.children})}}],link:function(a,b,c){a.getFooterLinks(c.contentDir)}}}),angular.module("idai.components").directive("includeReplace",function(){return{require:"ngInclude",restrict:"A",link:function(a,b,c){b.replaceWith(b.children())}}}),angular.module("idai.components").directive("idaiNavbar",function(){return{restrict:"E",scope:{userObject:"=",loginFunction:"&",logoutFunction:"&"},templateUrl:"partials/directives/idai-navbar.html",controller:["$scope","$http","localizedContent","$location",function(a,b,c,d){a.getNavbarLinks=function(d){b.get("info/content.json").success(function(b){var d=c.getNodeById(b,"navbar");void 0==d&&console.log("error: no navbarLinks found"),c.reduceTitles(d),a.dynamicLinkList=d.children})},a.search=function(b){if(a.q){var c="/search?q="+a.q;b&&(c+="&fq="+b),a.q=null,d.url(c)}}}],link:function(a,b,c){a.getNavbarLinks(c.contentDir)}}});